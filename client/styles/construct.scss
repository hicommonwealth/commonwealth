@import 'construct-ui/src/_shared/_colors';
@import 'shared.scss';

//
// text sizing and typography
//

$cui-base-size: 13px;
$cui-spacer: $cui-base-size * 1.5;

$cui-font-family:           $fonts;
$cui-font-family-monospace: $monospace-fonts;

$cui-font-weight-light:           300;
$cui-font-weight-normal:          400;
$cui-font-weight-bold:            500;
$cui-font-weight-heavy:           500; // this is only used in overrides
$cui-font-weight: $cui-font-weight-normal;

$cui-line-height: 1.5;

$cui-paragraph-margin-bottom:   1rem;

$cui-headings-margin-bottom: $cui-spacer;

$cui-headings-font-family: inherit;
$cui-headings-font-weight: 400;
$cui-headings-line-height: 1.2;

$cui-font-size:    floor($cui-base-size * 1.4);
$cui-font-size-xs: floor($cui-base-size * 1.1);
$cui-font-size-sm: floor($cui-base-size * 1.3);
$cui-font-size-lg: floor($cui-base-size * 1.6);
$cui-font-size-xl: floor($cui-base-size * 1.8);

$cui-h1-font-size: $cui-font-size * 2.5;
$cui-h2-font-size: $cui-font-size * 2;
$cui-h3-font-size: $cui-font-size * 1.5;
$cui-h4-font-size: $cui-font-size * 1.25;
$cui-h5-font-size: $cui-font-size * 1;
$cui-h6-font-size: $cui-font-size * 0.75;

//
// text colors
//

$cui-body-bg: $blue-grey50;
$cui-body-color: $text-color-black;
$cui-body-font-size: $cui-base-size * 1.6;

$cui-text-color:               $cui-body-color;
$cui-placeholder-color:        lighten($grey500, 3%);
$cui-placeholder-color-focus:  $grey500;
$cui-hover-color:              tint($blue-grey50, 25%);

$cui-headings-color: $cui-body-color;

$cui-link-color:               $blue800;
$cui-link-decoration:          none;
$cui-link-hover-color:         shade($cui-link-color, 25%);
$cui-link-hover-decoration:    underline;
$cui-focus-outline-color:      $blue300;

$cui-base-text-color:          lighten($grey800, 3%);
$cui-base-text-color-hover:    $grey800;

$cui-icon-color:               lighten($grey800, 3%);
$cui-icon-color-hover:         $grey800;

$cui-text-muted:               $grey600;
$cui-text-disabled:            $grey200;

//
// component styling
//

$cui-base-height-multiplier: 1.2;

$cui-base-height-xs:  floor($cui-base-size * 1.9);
$cui-base-height-sm:  floor($cui-base-size * 2.2);
$cui-base-height:     floor($cui-base-size * 2.8);
$cui-base-height-lg:  floor($cui-base-size * 3.1);
$cui-base-height-xl:  floor($cui-base-size * 3.4);

//
// component colors
//

$cui-border-radius: 4px;

$cui-base-bg-color: $base-bg-color;
$cui-primary-bg-color: $primary-bg-color;
$cui-positive-bg-color: $positive-bg-color;
$cui-negative-bg-color: $negative-bg-color;

$cui-base-bg-color-hover:         darken(#EAEAEC, 1.5%);
$cui-base-bg-color-active:        darken(#EAEAEC, 6.5%);

$cui-base-gradient:               linear-gradient(180deg, $cui-base-bg-color 10.5%, darken($cui-base-bg-color, 1%) 100%) !default;
$cui-base-gradient-hover:         linear-gradient(180deg, $cui-base-bg-color 10.5%, darken($cui-base-bg-color, 2.5%) 100%) !default;
$cui-base-gradient-active:        linear-gradient(180deg, $cui-base-bg-color 10.5%, darken($cui-base-bg-color, 3.5%) 100%) !default;
$cui-base-border-color:           #c5cdd1;
$cui-base-border-color-hover:     darken($cui-base-border-color, 3.5%);
$cui-base-border-color-active:    darken($cui-base-border-color, 4.5%);
$cui-base-box-shadow:             none;
$cui-base-box-shadow-active:      inset 0px 4px 5px shade($blue-grey50, 12.5%);

$cui-primary-bg-color-hover:      darken($cui-primary-bg-color, 7%);
$cui-primary-bg-color-active:     darken($cui-primary-bg-color, 12%);
$cui-primary-gradient:            $cui-primary-bg-color;
$cui-primary-gradient-hover:      $cui-primary-bg-color-hover;
$cui-primary-gradient-active:     $cui-primary-bg-color-active;
$cui-primary-border-color:        $cui-primary-bg-color;
$cui-primary-border-color-hover:  $cui-primary-bg-color-hover;
$cui-primary-border-color-active: $cui-primary-bg-color-active;

$cui-positive-bg-color-hover:      darken($cui-positive-bg-color, 5%);
$cui-positive-bg-color-active:     darken($cui-positive-bg-color, 10%);
$cui-positive-gradient:            $cui-positive-bg-color;
$cui-positive-gradient-hover:      $cui-positive-bg-color-hover;
$cui-positive-gradient-active:     $cui-positive-bg-color-active;
$cui-positive-border-color:        $cui-positive-bg-color;
$cui-positive-border-color-hover:  $cui-positive-bg-color-hover;
$cui-positive-border-color-active: $cui-positive-bg-color-active;

$cui-negative-bg-color-hover:      darken($cui-negative-bg-color, 6%);
$cui-negative-bg-color-active:     darken($cui-negative-bg-color, 11%);
$cui-negative-gradient:            $cui-negative-bg-color;
$cui-negative-gradient-hover:      $cui-negative-bg-color-hover;
$cui-negative-gradient-active:     $cui-negative-bg-color-active;
$cui-negative-border-color:        $cui-negative-bg-color;
$cui-negative-border-color-hover:  $cui-negative-bg-color-hover;
$cui-negative-border-color-active: $cui-negative-bg-color-active;

$cui-popover-arrow-border-color: lighten($cui-base-border-color, 8%);

@import 'construct-ui/src/utils/focus-manager/index.scss';
@import 'construct-ui/src/components/index.scss';

//
// construct theme overrides
//
html, body {
    padding-right: 0 !important;
}
.cui-button {
    font-size: inherit;
}
.cui-button .cui-button-sublabel,
.cui-button .cui-button-label {
    position: relative;
    top: 3px;
    overflow: visible;
}
.cui-button.cui-xl .cui-button-sublabel,
.cui-button.cui-xl .cui-button-label {
    top: 4px;
}
.cui-button.cui-sm,
.cui-button-group.cui-sm .cui-button,
.cui-menu.cui-sm .cui-button {
    padding: 0 17px;
    font-size: 16px;
    height: 26px;
    min-height: 26px;
    line-height: 26px;
}

.cui-tooltip .cui-popover-content {
    padding: 12px 12px 5px 12px !important;
}

.cui-popover-content {
    border-color: $cui-popover-arrow-border-color;
}
.cui-menu .cui-menu-divider {
    border-color: lighten($cui-popover-arrow-border-color, 2%);
}

.cui-button {
    font-weight: $cui-font-weight-bold !important; // fix weight
}
.cui-form .cui-form-label {
    font-size: $cui-font-size * 0.9;
    margin-bottom: 8px;
    font-weight: $cui-font-weight-bold; // fix weight
}
.cui-empty-state .cui-empty-state-header {
    font-weight: $cui-font-weight-bold; // fix weight
}
.cui-callout .cui-callout-header {
    font-weight: $cui-font-weight-bold; // fix weight
}
.cui-list .cui-list-item.cui-selected {
    font-weight: $cui-font-weight-bold; // fix weight
}
.cui-menu .cui-menu-heading {
    font-weight: $cui-font-weight-bold; // fix weight
    // color: $blue-grey900;
    // font-size: 12px;
}
.cui-tabs .cui-tabs-item {
    font-weight: $cui-font-weight-bold; // fix weight
    &, .cui-icon {
        // color: $blue-grey300;
    }
}
.cui-card h4 {
    margin: 0 0 0.2em;
    font-weight: $cui-font-weight-bold; // fix weight
}
.cui-table th {
    font-weight: $cui-font-weight-heavy; // fix weight
}

.cui-switch .cui-control-indicator::after {
    box-sizing: border-box; // fix switch sizing
}

// cui list items
.cui-list .cui-list-item {
    padding: 13px 13px 6.5px !important;
    .cui-list-item-content-left,
    .cui-list-item-content-right {
        position: relative;
        top: -2px;
    }
}

// cui table items
.cui-table th,
.cui-table td {
    padding: 13px 13px 6.5px !important;
}

// cui toast
.cui-toast .cui-toast-message {
    position: relative;
    top: 3px;
}

// cui tabs
.cui-tabs .cui-tabs-item {
    padding-top: 13px !important;
    padding-bottom: 7px !important;
    margin: 0 15px !important;
    .cui-icon {
        position: relative;
        top: -2px;
    }
}

// cui control padding
.cui-control {
    min-height: 1.5em;
    line-height: 1.5em;
}

// button link fixes
button, .cui-button {
    a:hover {
        text-decoration: inherit;
    }
}

// button color fixes
.cui-button {
    background: $background-color-white;
    transition: none;
    &:active, &.cui-active {
        background: $background-color-white;
        box-shadow: none;
    }
    // adjust rounded button styles
    &.cui-rounded {
        border-color: $grey200;
        &:hover {
            border-color: $grey700;
        }
        &:active, &.cui-active {
            border-color: $grey700;
        }
    }

    // adjust sublabel colors to grey from blue grey
    .cui-button-sublabel {
        color: $grey400;
    }
    &.cui-basic .cui-button-sublabel,
    &.cui-outlined .cui-button-sublabel {
        color: $grey400;
    }

    // adjust basic button styles
    &.cui-basic,
    .cui-button-group.cui-basic & {
        &:hover {
            background: $background-color-white-hover;
            color: $cui-base-text-color;
        }
        &:active, &.cui-active {
            background: $background-color-light;
            color: $cui-base-text-color;
        }
    }
}

// set text color on active buttons
.cui-button.cui-primary,
.cui-button-group.cui-primary .cui-button {
    a {
        color: $text-color-white;
    }
}

// set z-index
.cui-button-group .cui-button:active,
.cui-button-group .cui-button.cui-active,
.cui-button-group .cui-button:focus,
.cui-button-group .cui-button:hover {
    z-index: 2;
}

// adjust callout padding, colors, spacing
.cui-callout {
    line-height: 1.2;
    padding: 1.3em 1.2em 1em;
    @each $size in $cui-sizes {
        &.cui-#{$size} {
            padding: 1.3em 1.2em 1em;
        }
    }
    > .cui-icon {
        top: 1.28em;
    }
}
.cui-callout.cui-primary {
    border-color: $text-color-primary-light;
}
.cui-callout a {
    font-weight: 500;
    color: $text-color-primary;
}

// adjust input padding
.cui-input input {
    padding: 22px 15.6px 15.6px;
}
.cui-text-area textarea {
    padding: 14px 15.6px 15.6px;
    @each $size in $cui-sizes {
        &.cui-#{$size} {
            padding: 22px 15.6px 15.6px !important;
        }
    }
}
@each $size in $cui-sizes {
    .cui-input.cui-#{$size} input,
    .cui-input.cui-#{$size} textarea {
        padding: 22px 15.6px 15.6px !important;
    }
}

// adjust select height
.cui-select select {
    height: 41px;
    padding-top: 5px;
}

// adjust card padding
.cui-card {
    padding: 1.3em 1.2em 1em;
    @each $size in $cui-sizes {
        &.cui-#{$size} {
            padding: 1.3em 1.2em 1em;
        }
    }
}

// reduce list padding
.cui-list {
    .cui-list-item {
        padding: (floor($cui-base-padding / 1.2) * 0.75) floor($cui-base-padding / 1.2);
    }
    @each $size in $cui-sizes {
        .cui-list.cui-#{$size} {
            @include cui-list-sizing(
                map-get($cui-padding-map, $size) * 0.8,
                map-get($cui-font-size-map, $size)
            )
        }
    }
}

// reduce tag padding
.cui-tag {
    line-height: 1.2;
    @include cui-tag-sizing($cui-base-height * 0.5, $cui-base-padding, $cui-font-size);
    padding-top: 0.33em;
    padding-bottom: 0;
    .cui-icon svg {
        $icon-size: $cui-font-size * 0.75;
        height: $icon-size;
        width: $icon-size;
        max-height: $icon-size;
        max-width: $icon-size;
        min-height: $icon-size;
        min-width: $icon-size;
        position: relative;
        top: -3px;
        margin-right: 0.28em;
    }
    @include cui-tag-style(
        $cui-base-text-color,
        $cui-hover-color,
        tint($blue-grey100, 10%)
    );
    @each $size in $cui-sizes {
        &.cui-#{$size},
        .cui-#{$size} & {
            @include cui-tag-sizing(
                map-get($cui-height-map, $size) * 0.5,
                map-get($cui-padding-map, $size),
                map-get($cui-font-size-map, $size)
            );
            padding-top: 0.35em;
            padding-bottom: 0;
        }
        &.cui-#{$size} {
            .cui-icon svg {
                $icon-size: map-get($cui-font-size-map, $size) * 0.75;
                height: $icon-size;
                width: $icon-size;
                max-height: $icon-size;
                max-width: $icon-size;
                min-height: $icon-size;
                min-width: $icon-size;
                margin-right: 0.28em;
            }
        }
    }
}

// reduce tab padding
.cui-tabs {
    .cui-tabs-item {
        padding: ($cui-base-padding * 0.84) 0;
        margin: 0 ($cui-base-padding * 0.84);
        &:first-child {
            margin-left: 0;
        }
        &:last-child {
            margin-right: 0;
        }
    }
    @each $size in $cui-sizes {
        &.cui-#{$size} {
            @include cui-tabs-size(
                map-get($cui-padding-map, $size),
                map-get($cui-font-size-map, $size)
            )
        }
    }
}

// reduce menu padding
.cui-menu {
    max-width: none;
    padding: 4px 0;
    .cui-menu-item.cui-button {
        padding-left: 14px;
        padding-right: 14px;
        width: 100%;
    }
    > .cui-button.cui-basic {
        color: $text-color-black;
        .cui-icon svg {
            stroke: $text-color-black;
        }
    }
    > .cui-menu-divider {
        margin: 6px 0 5px;
    }
    .cui-button-label {
        width: 100%;
        text-align: left;
    }
    button.cui-button.cui-menu-item {
        font-weight: $cui-font-weight-normal !important; // !important to override the .cui-button style
    }
}

// position items relatively inside cards
.cui-card {
    position: relative;
}

// icon styles
.cui-icon.filled-icon svg {
    fill: currentColor;
}

// empty state override
.cui-empty-state.cui-empty-state-fill {
    z-index: initial;
}
.cui-spinner.cui-spinner-fill {
    z-index: initial;
}

// make spinner visually minimal
.cui-spinner .cui-spinner-icon {
    border-color: transparent;
    border-top-color: $text-color-darker !important;
    border-right-color: $text-color-darker !important;
}
.cui-spinner-message {
    margin-top: 0.8em;
    color: $text-color-darker;
}

// make spinner slower
$spinner-animation-duration: 1700ms;
.cui-spinner-icon {
    animation: loading $spinner-animation-duration infinite linear;
}

// make large spinners bigger
.cui-spinner.cui-lg .cui-spinner-icon,
.cui-lg .cui-spinner .cui-spinner-icon {
    height: 24px;
    width: 24px;
}
.cui-spinner.cui-xl .cui-spinner-icon,
.cui-xl .cui-spinner .cui-spinner-icon {
    height: 40px;
    width: 40px;
    border-width: 4px;
}

// the declarative construct-ui toaster doesn't allow position to be set by default, so we override it here
.cui-toaster.cui-toaster-top {
    top: auto;
    bottom: 0;
    z-index: 99999;
}

// portal z-index
.cui-portal {
    z-index: 102;
}

// prevent overlay from breaking inline text
.cui-overlay-inline {
    display: inline-block;
}

// dialog headers
.cui-dialog-header {
    padding: 15px 15px 15px 25px;
    h3 {
        margin: 6px 0 0;
        font-weight: 600;
    }
}

// dialog entry animation
.cui-overlay-backdrop {
    background: rgba(0,0,0,0.2);
    .fade-enter & {
        opacity: 0.01;
        transition: opacity 0.05s ease;
    }
    .fade-enter-active & {
        opacity: 1;
    }
    .fade-exit & {
        opacity: 0.01;
        transition: opacity 0.05s ease;
    }
    .fade-exit-active & {
        opacity: 0;
    }
}

.cui-dialog-content {
    .fade-enter & {
        opacity: 0.01;
        transform: scale(0.95);
        transition: opacity 0.05s ease, popout 0.05s ease,
                    transform 0.05s cubic-bezier(0.54, 1.12, 0.38, 1.11);
    }
    .fade-enter-active & {
        opacity: 1;
        transform: scale(1);
    }
    .fade-exit & {
        transition: opacity 0.05s ease, popout 0.05s ease,
                    transform 0.05s cubic-bezier(0.54, 1.12, 0.38, 1.11);
    }
    .fade-exit-active & {
        opacity: 0;
        transform: scale(0.95);
    }
}
